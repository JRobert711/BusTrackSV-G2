# ================================================================================
# BusTrack SV - Backend Environment Variables
# ================================================================================
# Copy this file to .env and fill in your actual values
# Command: cp .env.example .env (Linux/Mac) or copy .env.example .env (Windows)
# ================================================================================

# ================================================================================
# ENVIRONMENT
# ================================================================================
# Specifies the application environment: development, production, or test
# In production mode, error messages are sanitized and logging is optimized
NODE_ENV=development

# ================================================================================
# SERVER
# ================================================================================
# The port number on which the server will listen
# Default: 5000
PORT=5000

# ================================================================================
# JWT (JSON Web Tokens) Configuration
# ================================================================================
# Secret key used to sign access tokens
# IMPORTANT: Change this to a strong random string in production
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your_super_secret_jwt_key_change_in_production

# Secret key used to sign refresh tokens (should be different from JWT_SECRET)
# IMPORTANT: Change this to a strong random string in production
JWT_REFRESH_SECRET=your_super_secret_refresh_key_change_in_production

# How long access tokens are valid (e.g., 15m, 1h, 24h)
# Short-lived tokens are more secure (recommended: 15m to 1h)
ACCESS_TOKEN_EXPIRES_IN=15m

# How long refresh tokens are valid (e.g., 7d, 30d, 90d)
# Longer validity allows users to stay logged in
REFRESH_TOKEN_EXPIRES_IN=7d

# ================================================================================
# CORS (Cross-Origin Resource Sharing)
# ================================================================================
# Comma-separated list of allowed origins (no spaces after commas)
# Examples:
#   Single origin: http://localhost:5173
#   Multiple origins: http://localhost:5173,https://bustrack.app,https://www.bustrack.app
#   All origins (NOT recommended for production): *
CORS_ORIGIN=http://localhost:5173

# Whether to allow credentials (cookies, authorization headers) in CORS requests
# Set to 'true' if your frontend sends cookies or auth headers
CORS_CREDENTIALS=false

# ================================================================================
# FIREBASE ADMIN SDK
# ================================================================================
# You must provide ONE of the following two options:
#
# Option 1: FIREBASE_SERVICE_ACCOUNT_BASE64 (Recommended for production/deployment)
# ----------------------------------------------------------------------------------
# Base64-encoded service account JSON file
# Steps to create:
#   1. Download your service account JSON from Firebase Console
#   2. Encode it to base64:
#      Linux/Mac: base64 -w 0 path/to/serviceAccount.json
#      Windows PowerShell: [Convert]::ToBase64String([IO.File]::ReadAllBytes("path\to\serviceAccount.json"))
#   3. Paste the entire base64 string below (should be one long line)
# FIREBASE_SERVICE_ACCOUNT_BASE64=eyJ0eXBlIjoic2VydmljZV9hY2NvdW50IiwicHJvamVjdF9pZCI6InlvdXItcHJvamVjdC1pZCIsInByaXZhdGVfa2V5X2lkIjoieW91ci1rZXktaWQiLCJwcml2YXRlX2tleSI6Ii0tLS0t...

# Option 2: GOOGLE_APPLICATION_CREDENTIALS (Recommended for local development)
# ----------------------------------------------------------------------------------
# Path to your Firebase service account JSON file
# Steps:
#   1. Download service account JSON from Firebase Console
#   2. Place it in src/config/ folder
#   3. Uncomment and set the path below
# GOOGLE_APPLICATION_CREDENTIALS=./src/config/firebase-adminsdk.json

# Firebase Realtime Database URL (optional - only needed if using Realtime Database)
# Find this in Firebase Console -> Project Settings -> Service Accounts
# FIREBASE_DATABASE_URL=https://your-project-id.firebaseio.com

# ================================================================================
# GPS & DATA RETENTION
# ================================================================================
# Number of days to retain GPS tracking data before automatic cleanup
# Example: 30 means GPS data older than 30 days will be purged
# Set to 0 to disable automatic cleanup (not recommended)
GPS_RETENTION_DAYS=30

# ================================================================================
# ADDITIONAL CONFIGURATION (Optional)
# ================================================================================

# Rate Limiting (requests per time window)
# Helps prevent abuse and DOS attacks
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Bcrypt salt rounds (higher = more secure but slower)
# Recommended: 10-12 for production
BCRYPT_SALT_ROUNDS=10

# Logging level: error, warn, info, debug
# Use 'error' or 'warn' in production, 'debug' in development
LOG_LEVEL=info
